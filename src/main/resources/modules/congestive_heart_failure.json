{
  "name": "Congestive Heart Failure",
  "remarks": [
    "REFERENCES",
    "This module was built based on the following references:",
    "1. the existing synthea congestive_heartfailure_module",
    "2. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5494150/",
    "3. https://www.acc.org/tools-and-practice-support/clinical-toolkits/~/media/1E4D8F9B69D14F55821BFE642FBFA221.ashx",
    "4. https://r.details.loinc.org/LOINC/55405-5.html?sections=Comprehensive",
    "5. https://www.nbt.nhs.uk/sites/default/files/BNP%20fact%20sheet.pdf",
    "6. https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4254520/",
    "7. http://heartfailure.onlinejacc.org/content/jhf/2/3/278.full.pdf",
    "8. https://www.ahajournals.org/doi/full/10.1161/JAHA.117.007569",
    "",
    "GOALS",
    "- Simulate entire lifecycle of HF from onset to death",
    "- Simulate disease progression through NYHA II-IV",
    "- Include telemedicine (remote monitoring)",
    "",
    "LIMITATIONS",
    "- Age-specific prevalences are based on numbers from Portugal",
    "",
    "IN PROGRESS",
    "- EF observations",
    "- Reporting on imaging procedures",
    "- Implement full LOINC heart failure tracking panel",
    "",
    "",
    "TODO:",
    "- NYHA classification",
    "- Adopt medications to severity",
    "- send patients to observation unit ([6])",
    "- Better modelling of mortality (e.g. clustered ED visits [8])",
    "- What is a documented probability of acute exacerbations per 6 months? 1% was too low. But what is good number?"
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "Age Guard"
    },
    "CHF symptom onset 1": {
      "type": "Symptom",
      "symptom": "Dyspnea on exertion (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF symptom onset 2"
    },
    "CHF symptom onset 2": {
      "type": "Symptom",
      "symptom": "Dyspnea (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF symptom onset 3"
    },
    "CHF symptom onset 3": {
      "type": "Symptom",
      "symptom": "Paroxysmal dyspnea (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF symptom onset 4"
    },
    "CHF Condition Start": {
      "type": "ConditionOnset",
      "assign_to_attribute": "chf",
      "target_encounter": "CHF initial workup encounter",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 88805009,
          "display": "Chronic congestive heart failure (disorder)"
        }
      ],
      "direct_transition": "CHF initial workup encounter"
    },
    "CHF initial workup encounter": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "reason": "chf",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "direct_transition": "Recorded Symptom 1"
    },
    "CHF careplan": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 735984001,
          "display": "Heart failure self management plan"
        }
      ],
      "direct_transition": "Wrap up follow-up encounter",
      "reason": "chf",
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 183063000,
          "display": "low salt diet education"
        },
        {
          "system": "SNOMED-CT",
          "code": 183301007,
          "display": "physical exercise"
        }
      ]
    },
    "CHF Medication Start 1": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 866414,
          "display": "24 HR metoprolol succinate 100 MG Extended Release Oral Tablet [Toprol]"
        }
      ],
      "direct_transition": "CHF Medication Start 2",
      "reason": "chf",
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 1,
          "unit": "days"
        },
        "duration": {
          "quantity": 30,
          "unit": "days"
        },
        "refills": 12
      }
    },
    "CHF Medication Start 2": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": "313988",
          "display": "Furosemide 40 MG Oral Tablet"
        }
      ],
      "direct_transition": "Med_Rec",
      "reason": "chf",
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 1,
          "unit": "days"
        },
        "duration": {
          "quantity": 30,
          "unit": "days"
        },
        "refills": 10
      }
    },
    "end_followup_encounter": {
      "type": "EncounterEnd",
      "direct_transition": "Maintaining CHF"
    },
    "Maintaining CHF": {
      "type": "Delay",
      "exact": {
        "quantity": 6,
        "unit": "months"
      },
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Or",
            "conditions": [
              {
                "condition_type": "Attribute",
                "attribute": "chf_admissions",
                "operator": ">=",
                "value": 2
              },
              {
                "condition_type": "Or",
                "conditions": [
                  {
                    "condition_type": "Attribute",
                    "attribute": "nyha_class",
                    "operator": ">=",
                    "value": 3
                  },
                  {
                    "condition_type": "Vital Sign",
                    "vital_sign": "Left ventricular Ejection fraction",
                    "operator": "<=",
                    "value": 35
                  }
                ]
              }
            ]
          },
          "distributions": [
            {
              "transition": "Progress to Stage D",
              "distribution": 0.065
            },
            {
              "transition": "Potential CHF Flare",
              "distribution": 0.5
            },
            {
              "transition": "Followup CHF Encounter",
              "distribution": 0.43500000000000005
            }
          ]
        },
        {
          "condition": {
            "condition_type": "PriorState",
            "name": "Followup CHF Encounter",
            "within": {
              "quantity": 1,
              "unit": "years"
            }
          },
          "distributions": [],
          "transition": "Potential CHF Flare"
        },
        {
          "distributions": [],
          "transition": "Followup CHF Encounter"
        }
      ]
    },
    "Potential CHF Flare": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "acute CHF flare",
          "distribution": 0.5
        },
        {
          "transition": "Maintaining CHF",
          "distribution": 0.5
        }
      ]
    },
    "CHF ED Visit": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for Problem"
        }
      ],
      "direct_transition": "Oxygen_Saturation",
      "reason": "CHF Condition Start"
    },
    "CXR_ED": {
      "type": "ImagingStudy",
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": 399208008,
        "display": "Plain chest X-ray (procedure)"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": 51185008,
            "display": "Thoracic structure (body structure)"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "CR",
            "display": "Computed Radiography"
          },
          "instances": [
            {
              "title": "Title of this image",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.1.1",
                "display": "Digital X-Ray Image Storage – for Presentation"
              }
            }
          ]
        }
      ],
      "direct_transition": "ED_End"
    },
    "ED_End": {
      "type": "EncounterEnd",
      "distributed_transition": [
        {
          "distribution": 0.025
        },
        {
          "transition": "Shock Disorder",
          "distribution": 0.05
        },
        {
          "transition": "Admit_Discharge Transition",
          "distribution": 0.95
        }
      ]
    },
    "Admit_Discharge Transition": {
      "type": "Simple",
      "remarks": [
        "Different studies suggest numbers from 74% to 84% for inpatient admittance."
      ],
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Or",
            "conditions": [
              {
                "condition_type": "Vital Sign",
                "vital_sign": "Systolic Blood Pressure",
                "operator": "<",
                "value": 90
              },
              {
                "condition_type": "Or",
                "conditions": [
                  {
                    "condition_type": "PriorState",
                    "name": "Oxygen",
                    "within": {
                      "quantity": 1,
                      "unit": "days"
                    }
                  },
                  {
                    "condition_type": "PriorState",
                    "name": "Shock Disorder",
                    "within": {
                      "quantity": 1,
                      "unit": "days"
                    }
                  }
                ]
              }
            ]
          },
          "distributions": [],
          "transition": "ICU Admission"
        },
        {
          "distributions": [
            {
              "transition": "Inpatient Admission",
              "distribution": 0.84
            },
            {
              "transition": "Maintaining CHF",
              "distribution": 0.16
            }
          ]
        }
      ]
    },
    "Inpatient CarePlan": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 736353004,
          "display": "Inpatient care plan (record artifact)"
        }
      ],
      "direct_transition": "Med_Rec_2",
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 385715006,
          "display": "Cardiac care (regime/therapy)"
        },
        {
          "system": "SNOMED-CT",
          "code": 386619000,
          "display": "Low sodium diet (finding)"
        }
      ],
      "goals": [
        {
          "addresses": [
            "chf"
          ],
          "text": "Decongestion"
        },
        {
          "addresses": [
            "chf"
          ],
          "text": "Assess goals of care"
        }
      ],
      "reason": "chf"
    },
    "Furosemide": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 1719286,
          "display": "10 ML Furosemide 10 MG/ML Injection"
        }
      ],
      "reason": "chf",
      "administration": true,
      "direct_transition": "Oxygen_Saturation_Admission"
    },
    "Inpatient Daily Transition": {
      "type": "Delay",
      "exact": {
        "quantity": 12,
        "unit": "hours"
      },
      "direct_transition": "Inpatient Death decision"
    },
    "Inpatient Discharge": {
      "type": "Simple",
      "direct_transition": "Heart Failure Education"
    },
    "End Inpatient Care Plan": {
      "type": "CarePlanEnd",
      "direct_transition": "Check Outcome",
      "careplan": "Inpatient CarePlan"
    },
    "End Inpatient Encounter": {
      "type": "EncounterEnd",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Date",
            "operator": "<",
            "year": 2005,
            "value": 0
          },
          "distributions": [
            {
              "transition": "Maintaining CHF",
              "distribution": 1
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "Maintaining CHF with Telemedicine",
              "distribution": 0.7
            },
            {
              "transition": "Maintaining CHF",
              "distribution": 0.30000000000000004
            }
          ]
        }
      ],
      "remarks": [
        "Discharge the patient. Starting since the early 2000s this has a likelihood of being an enrollment into a telemedical home monitoring program, designed to prevent readmissions."
      ]
    },
    "Age Guard": {
      "type": "Guard",
      "allow": {
        "condition_type": "Age",
        "operator": ">=",
        "quantity": 20,
        "unit": "years",
        "value": 0
      },
      "direct_transition": "Determine CHF"
    },
    "CHF careplan for smokers": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 735984001,
          "display": "Heart failure self management plan"
        }
      ],
      "reason": "chf",
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 183063000,
          "display": "low salt diet education"
        },
        {
          "system": "SNOMED-CT",
          "code": 183301007,
          "display": "physical exercise"
        },
        {
          "system": "SNOMED-CT",
          "code": 225323000,
          "display": "Smoking cessation education"
        }
      ],
      "direct_transition": "Wrap up follow-up encounter"
    },
    "Assign CHF care plan": {
      "type": "Simple",
      "conditional_transition": [
        {
          "transition": "Wrap up follow-up encounter",
          "condition": {
            "condition_type": "Active CarePlan",
            "codes": [
              {
                "system": "SNOMED-CT",
                "code": 735984001,
                "display": "Heart failure self management plan"
              }
            ]
          }
        },
        {
          "transition": "CHF careplan for smokers",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "smoker",
            "operator": "==",
            "value": true
          }
        },
        {
          "transition": "CHF careplan"
        }
      ]
    },
    "Wrap up follow-up encounter": {
      "type": "Simple",
      "direct_transition": "end_followup_encounter"
    },
    "Order medications": {
      "type": "Simple",
      "direct_transition": "CHF Medication Start 1"
    },
    "Report workup imaging": {
      "type": "DiagnosticReport",
      "codes": [
        {
          "system": "LOINC",
          "code": "55405-5",
          "display": "Heartfailure Tracking Panel"
        }
      ],
      "observations": [
        {
          "category": "laboratory",
          "unit": "%",
          "codes": [
            {
              "system": "LOINC",
              "code": "10230-1",
              "display": "Left ventricular Ejection fraction"
            }
          ],
          "vital_sign": "Left ventricular Ejection fraction"
        }
      ],
      "direct_transition": "Record_MetabolicPanel"
    },
    "Count inpatient stays": {
      "type": "Counter",
      "attribute": "chf_inpatient_admissions",
      "action": "increment",
      "direct_transition": "Inpatient LOS"
    },
    "Inpatient LOS": {
      "type": "SetAttribute",
      "attribute": "inpatient-los",
      "direct_transition": "Inpatient CarePlan",
      "value": 0
    },
    "Reset inpatient count": {
      "type": "SetAttribute",
      "attribute": "chf_inpatient_admissions",
      "direct_transition": "Reset emergency count",
      "value": 0
    },
    "Inpatient daily routine": {
      "type": "Simple",
      "direct_transition": "Furosemide"
    },
    "Death": {
      "type": "Death",
      "direct_transition": "Terminal",
      "referenced_by_attribute": "chf",
      "range": {
        "low": 1,
        "high": 12,
        "unit": "hours"
      }
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Inpatient Discharge decision": {
      "type": "Counter",
      "attribute": "inpatient-los",
      "action": "increment",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "inpatient-los",
            "operator": ">=",
            "value": 5
          },
          "distributions": [
            {
              "transition": "Inpatient Discharge",
              "distribution": 0.8
            },
            {
              "transition": "Inpatient daily routine",
              "distribution": 0.19999999999999996
            }
          ]
        }
      ],
      "remarks": [
        "Model the ALOS (5.8) through an increased likelihood of a discharge after 5 days."
      ]
    },
    "Inpatient Death decision": {
      "type": "Simple",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "chf_admissions",
            "operator": ">=",
            "value": 4
          },
          "distributions": [
            {
              "transition": "Death",
              "distribution": 0.8
            },
            {
              "transition": "Inpatient Discharge decision",
              "distribution": 0.2
            }
          ]
        },
        {
          "distributions": [
            {
              "distribution": 0.03,
              "transition": "Death"
            },
            {
              "transition": "Inpatient Discharge decision",
              "distribution": 0.97
            }
          ]
        }
      ],
      "remarks": [
        "A high number of previous inpatient encounters increases the likelihood of death."
      ]
    },
    "Maintaining CHF with Telemedicine": {
      "type": "Delay",
      "exact": {
        "quantity": 1,
        "unit": "days"
      },
      "distributed_transition": [
        {
          "transition": "Daily Self-Measurement Encounter",
          "distribution": 0.6
        },
        {
          "transition": "Skip daily measurement",
          "distribution": 0.39
        },
        {
          "transition": "Potential CHF Flare",
          "distribution": 0.010000000000000009
        }
      ]
    },
    "Skip daily measurement": {
      "type": "Simple",
      "direct_transition": "Maintaining CHF with Telemedicine"
    },
    "Daily self-measurement": {
      "type": "MultiObservation",
      "category": "vital-signs",
      "number_of_observations": 2,
      "codes": [
        {
          "system": "LOINC",
          "code": "85354-9",
          "display": "Blood Pressure"
        }
      ],
      "direct_transition": "End self-measurement",
      "observations": [
        {
          "category": "vital-signs",
          "unit": "mm[Hg]",
          "codes": [
            {
              "system": "LOINC",
              "code": "8480-6",
              "display": "Systolic Blood Pressure"
            }
          ],
          "vital_sign": "Systolic Blood Pressure"
        },
        {
          "category": "vital-signs",
          "unit": "mm[Hg]",
          "codes": [
            {
              "system": "LOINC",
              "code": "8462-4",
              "display": "Diastolic Blood Pressure"
            }
          ],
          "vital_sign": "Diastolic Blood Pressure"
        }
      ]
    },
    "End self-measurement": {
      "type": "EncounterEnd",
      "direct_transition": "Maintaining CHF with Telemedicine"
    },
    "Daily Self-Measurement Encounter": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 448337001,
          "display": "Telemedicine consultation with patient"
        }
      ],
      "direct_transition": "Daily self-measurement",
      "reason": "chf"
    },
    "Determine CHF": {
      "type": "Simple",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Gender",
            "gender": "F"
          },
          "distributions": [
            {
              "transition": "Age 20-39",
              "distribution": 0.002
            },
            {
              "transition": "Age 40-59",
              "distribution": 0.017
            },
            {
              "transition": "Age 50-79",
              "distribution": 0.048
            },
            {
              "transition": "Age 80+",
              "distribution": 0.12
            },
            {
              "transition": "Terminal",
              "distribution": 0.813
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Gender",
            "gender": "M"
          },
          "distributions": [
            {
              "transition": "Age 20-39",
              "distribution": 0.003
            },
            {
              "transition": "Age 40-59",
              "distribution": 0.012
            },
            {
              "transition": "Age 50-79",
              "distribution": 0.069
            },
            {
              "transition": "Age 80+",
              "distribution": 0.128
            },
            {
              "transition": "Terminal",
              "distribution": 0.788
            }
          ]
        }
      ]
    },
    "Age 20-39": {
      "type": "Delay",
      "range": {
        "low": 0,
        "high": 19,
        "unit": "years"
      },
      "direct_transition": "Determine Type"
    },
    "Age 40-59": {
      "type": "Delay",
      "range": {
        "low": 20,
        "high": 39,
        "unit": "years"
      },
      "direct_transition": "Determine Type"
    },
    "Age 50-79": {
      "type": "Delay",
      "range": {
        "low": 30,
        "high": 59,
        "unit": "years"
      },
      "direct_transition": "Determine Type"
    },
    "Age 80+": {
      "type": "Delay",
      "range": {
        "low": 60,
        "high": 65,
        "unit": "years"
      },
      "direct_transition": "Determine Type"
    },
    "CHF symptom onset 4": {
      "type": "Symptom",
      "symptom": "Orthopnea (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF symptom onset 5"
    },
    "CHF symptom onset 5": {
      "type": "Symptom",
      "symptom": "Edema (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF symptom onset 6"
    },
    "CHF symptom onset 6": {
      "type": "Symptom",
      "symptom": "Rales (finding)",
      "cause": "",
      "exact": {
        "quantity": 1
      },
      "direct_transition": "CHF Condition Start"
    },
    "Recorded Symptom 1": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "direct_transition": "Recorded Symptom 2",
      "value_code": {
        "system": "SNOMED-CT",
        "code": 60845006,
        "display": "Dyspnea on exertion (finding)"
      }
    },
    "Recorded Symptom 2": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "value_code": {
        "system": "SNOMED-CT",
        "code": 267036007,
        "display": "Dyspnea (finding)"
      },
      "direct_transition": "Recorded Symptom 3"
    },
    "Recorded Symptom 3": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "value_code": {
        "system": "SNOMED-CT",
        "code": 59265000,
        "display": "Paroxysmal dyspnea (finding)"
      },
      "direct_transition": "Recorded Symptom 4"
    },
    "Recorded Symptom 4": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "value_code": {
        "system": "SNOMED-CT",
        "code": 62744007,
        "display": "Orthopnea (finding)"
      },
      "direct_transition": "Recorded Symptom 5"
    },
    "Recorded Symptom 5": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "value_code": {
        "system": "SNOMED-CT",
        "code": 267038008,
        "display": "Edema (finding)"
      },
      "direct_transition": "Recorded Symptom 6"
    },
    "Recorded Symptom 6": {
      "type": "Observation",
      "category": "exam",
      "unit": "",
      "codes": [
        {
          "system": "LOINC",
          "code": "75325-1",
          "display": "Symptom"
        }
      ],
      "value_code": {
        "system": "SNOMED-CT",
        "code": 19283009,
        "display": "Rales (finding)"
      },
      "direct_transition": "Initial Lab Work"
    },
    "Initial Lab Work": {
      "type": "CallSubmodule",
      "submodule": "heart/chf_lab_work",
      "direct_transition": "ECG"
    },
    "Initial Encounter End": {
      "type": "EncounterEnd",
      "remarks": [
        "Anemia prevalence for CHF - https://www.ncbi.nlm.nih.gov/pubmed/20630401",
        ""
      ],
      "direct_transition": "Intra Encounter Time Gate"
    },
    "Intra Encounter Time Gate": {
      "type": "Delay",
      "direct_transition": "Followup CHF Encounter",
      "range": {
        "low": 2,
        "high": 3,
        "unit": "weeks"
      }
    },
    "Followup CHF Encounter": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "reason": "chf",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "direct_transition": "Echocardiography"
    },
    "CHF onset": {
      "type": "Simple",
      "direct_transition": "Reset inpatient count"
    },
    "HFrEF": {
      "type": "SetAttribute",
      "attribute": "chf_type",
      "value": "HFrEF",
      "distributed_transition": [
        {
          "transition": "LVEF HFrEF Low",
          "distribution": 0.2
        },
        {
          "transition": "LVEF HFrEF Mid",
          "distribution": 0.4
        },
        {
          "transition": "LVEF HFrEF High",
          "distribution": 0.4
        }
      ]
    },
    "HFpEF": {
      "type": "SetAttribute",
      "attribute": "chf_type",
      "direct_transition": "LVEF HFpEF",
      "value": "HFpEF"
    },
    "Determine Type": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "HFrEF",
          "distribution": 0.39
        },
        {
          "transition": "HFmEF",
          "distribution": 0.13
        },
        {
          "transition": "HFpEF",
          "distribution": 0.48
        }
      ]
    },
    "LVEF HFpEF": {
      "type": "VitalSign",
      "vital_sign": "Left ventricular Ejection fraction",
      "unit": "",
      "range": {
        "low": 50,
        "high": 100
      },
      "distributed_transition": [
        {
          "transition": "NYHA Class 1",
          "distribution": 0.2
        },
        {
          "transition": "NYHA Class 2",
          "distribution": 0.55
        },
        {
          "transition": "NYHA Class 3",
          "distribution": 0.2
        },
        {
          "transition": "NYHA Class 4",
          "distribution": 0.05
        }
      ]
    },
    "NYHA Class 1": {
      "type": "SetAttribute",
      "attribute": "nyha_class",
      "direct_transition": "CHF onset",
      "value": 1
    },
    "NYHA Class 2": {
      "type": "SetAttribute",
      "attribute": "nyha_class",
      "value": 2,
      "direct_transition": "CHF onset"
    },
    "NYHA Class 3": {
      "type": "SetAttribute",
      "attribute": "nyha_class",
      "value": 3,
      "direct_transition": "CHF onset"
    },
    "NYHA Class 4": {
      "type": "SetAttribute",
      "attribute": "nyha_class",
      "value": 4,
      "direct_transition": "CHF onset"
    },
    "Echocardiography": {
      "type": "ImagingStudy",
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": 40701008,
        "display": "Echocardiography (procedure)"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": 80891009,
            "display": "Heart structure (body structure)"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "US",
            "display": "Ultrasound"
          },
          "instances": [
            {
              "title": "Ultrasound Multiframe Image Storage",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.3.1",
                "display": "Ultrasound Multiframe Image Storage"
              }
            }
          ]
        }
      ],
      "direct_transition": "Report workup imaging"
    },
    "HFmEF": {
      "type": "SetAttribute",
      "attribute": "chf_type",
      "direct_transition": "LVEF HFmEF",
      "value": "HFmEF"
    },
    "LVEF HFmEF": {
      "type": "VitalSign",
      "vital_sign": "Left ventricular Ejection fraction",
      "unit": "",
      "range": {
        "low": 41,
        "high": 49
      },
      "distributed_transition": [
        {
          "transition": "NYHA Class 1",
          "distribution": 0.2
        },
        {
          "transition": "NYHA Class 2",
          "distribution": 0.55
        },
        {
          "transition": "NYHA Class 3",
          "distribution": 0.2
        },
        {
          "transition": "NYHA Class 4",
          "distribution": 0.05
        }
      ]
    },
    "LVEF HFrEF Low": {
      "type": "VitalSign",
      "vital_sign": "Left ventricular Ejection fraction",
      "unit": "",
      "range": {
        "low": 5,
        "high": 19
      },
      "distributed_transition": [
        {
          "transition": "NYHA Class 3",
          "distribution": 0.75
        },
        {
          "transition": "NYHA Class 4",
          "distribution": 0.25
        }
      ]
    },
    "LVEF HFrEF Mid": {
      "type": "VitalSign",
      "vital_sign": "Left ventricular Ejection fraction",
      "unit": "",
      "range": {
        "low": 20,
        "high": 35
      },
      "distributed_transition": [
        {
          "transition": "NYHA Class 2",
          "distribution": 0.65
        },
        {
          "transition": "NYHA Class 3",
          "distribution": 0.35
        }
      ]
    },
    "LVEF HFrEF High": {
      "type": "VitalSign",
      "vital_sign": "Left ventricular Ejection fraction",
      "unit": "",
      "range": {
        "low": 36,
        "high": 40
      },
      "distributed_transition": [
        {
          "transition": "NYHA Class 1",
          "distribution": 0.25
        },
        {
          "transition": "NYHA Class 2",
          "distribution": 0.75
        }
      ]
    },
    "Stop Ibuprofen": {
      "type": "MedicationEnd",
      "direct_transition": "Assign CHF care plan",
      "codes": [
        {
          "system": "RxNorm",
          "code": 198405,
          "display": "Ibuprofen 100 MG Oral Tablet"
        },
        {
          "system": "SNOMED-CT",
          "code": 310965,
          "display": "Ibuprofen 200 MG Oral Tablet"
        }
      ]
    },
    "Med_Rec": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "430193006",
          "display": "Medication Reconciliation (procedure)"
        }
      ],
      "direct_transition": "Stop Ibuprofen"
    },
    "Record_MetabolicPanel": {
      "type": "DiagnosticReport",
      "number_of_observations": 8,
      "codes": [
        {
          "system": "LOINC",
          "code": "51990-0",
          "display": "Basic Metabolic Panel"
        }
      ],
      "observations": [
        {
          "category": "laboratory",
          "vital_sign": "Glucose",
          "codes": [
            {
              "system": "LOINC",
              "code": "2339-0",
              "display": "Glucose"
            }
          ],
          "unit": "mg/dL"
        },
        {
          "category": "laboratory",
          "vital_sign": "Urea Nitrogen",
          "codes": [
            {
              "system": "LOINC",
              "code": "6299-2",
              "display": "Urea Nitrogen"
            }
          ],
          "unit": "mg/dL"
        },
        {
          "category": "laboratory",
          "vital_sign": "Creatinine",
          "codes": [
            {
              "system": "LOINC",
              "code": "38483-4",
              "display": "Creatinine"
            }
          ],
          "unit": "mg/dL"
        },
        {
          "category": "laboratory",
          "vital_sign": "Calcium",
          "codes": [
            {
              "system": "LOINC",
              "code": "49765-1",
              "display": "Calcium"
            }
          ],
          "unit": "mg/dL"
        },
        {
          "category": "laboratory",
          "vital_sign": "Sodium",
          "codes": [
            {
              "system": "LOINC",
              "code": "2947-0",
              "display": "Sodium"
            }
          ],
          "unit": "mmol/L"
        },
        {
          "category": "laboratory",
          "vital_sign": "Potassium",
          "codes": [
            {
              "system": "LOINC",
              "code": "6298-4",
              "display": "Potassium"
            }
          ],
          "unit": "mmol/L"
        },
        {
          "category": "laboratory",
          "vital_sign": "Chloride",
          "codes": [
            {
              "system": "LOINC",
              "code": "2069-3",
              "display": "Chloride"
            }
          ],
          "unit": "mmol/L"
        },
        {
          "category": "laboratory",
          "vital_sign": "Carbon Dioxide",
          "codes": [
            {
              "system": "LOINC",
              "code": "20565-8",
              "display": "Carbon Dioxide"
            }
          ],
          "unit": "mmol/L"
        }
      ],
      "direct_transition": "Order medications"
    },
    "Repeat Lab Work": {
      "type": "CallSubmodule",
      "submodule": "heart/chf_lab_work",
      "direct_transition": "CXR_ED"
    },
    "Progress to Stage D": {
      "type": "Simple",
      "direct_transition": "TODO"
    },
    "ICU Admission": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 305351004,
          "display": "Admission to intensive care unit (procedure)"
        }
      ],
      "reason": "chf",
      "direct_transition": "Count ICU stays"
    },
    "Inpatient Admission": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 308540004,
          "display": "Inpatient stay (finding)"
        }
      ],
      "direct_transition": "Count inpatient stays",
      "reason": "chf"
    },
    "TODO": {
      "type": "Simple",
      "direct_transition": "Terminal"
    },
    "Wait 12 hours": {
      "type": "Delay",
      "exact": {
        "quantity": 12,
        "unit": "hours"
      },
      "direct_transition": "Repeat_Lab_Work"
    },
    "Furosemide_2": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 1719286,
          "display": "10 ML Furosemide 10 MG/ML Injection"
        }
      ],
      "reason": "chf",
      "administration": true,
      "direct_transition": "Inpatient Daily Transition"
    },
    "Repeat_Lab_Work": {
      "type": "CallSubmodule",
      "submodule": "heart/chf_lab_work",
      "direct_transition": "Furosemide_2"
    },
    "Dead within 28 days": {
      "type": "Death",
      "direct_transition": "End Inpatient Encounter",
      "range": {
        "low": 1,
        "high": 28,
        "unit": "days"
      },
      "referenced_by_attribute": "chf"
    },
    "Dead within 1 year": {
      "type": "Death",
      "direct_transition": "End Inpatient Encounter",
      "range": {
        "low": 29,
        "high": 364,
        "unit": "days"
      },
      "referenced_by_attribute": "chf"
    },
    "Reset ICU count": {
      "type": "SetAttribute",
      "attribute": "chf_icu_admissions",
      "value": 0,
      "direct_transition": "Reset admission count"
    },
    "Reset emergency count": {
      "type": "SetAttribute",
      "attribute": "chf_emergency_admissions",
      "value": 0,
      "direct_transition": "Reset ICU count"
    },
    "Reset admission count": {
      "type": "SetAttribute",
      "attribute": "chf_admissions",
      "value": 0,
      "direct_transition": "CHF symptom onset 1"
    },
    "acute CHF flare": {
      "type": "Counter",
      "attribute": "chf_admissions",
      "action": "increment",
      "direct_transition": "acute_CHF_flare",
      "remarks": [
        "Pregnant patients and patients with Acute myocardial infarction should be excluded and moved down an alternative pathway. "
      ]
    },
    "acute_CHF_flare": {
      "type": "Counter",
      "attribute": "chf_emergency_admissions",
      "action": "increment",
      "remarks": [
        "Pregnant patients and patients with Acute myocardial infarction should be excluded and moved down an alternative pathway. "
      ],
      "direct_transition": "CHF ED Visit"
    },
    "Count ICU stays": {
      "type": "Counter",
      "attribute": "chf_icu_admissions",
      "action": "increment",
      "direct_transition": "Inpatient LOS"
    },
    "Oxygen_Saturation": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "%",
      "codes": [
        {
          "system": "LOINC",
          "code": "2708-6",
          "display": "Oxygen saturation in Arterial blood"
        },
        {
          "system": "LOINC",
          "code": "59408-5",
          "display": "Oxygen saturation in Arterial blood by Pulse oximetry"
        }
      ],
      "vital_sign": "Oxygen Saturation",
      "conditional_transition": [
        {
          "transition": "Oxygen",
          "condition": {
            "condition_type": "Vital Sign",
            "vital_sign": "Oxygen Saturation",
            "operator": "<",
            "value": 90
          }
        },
        {
          "transition": "Repeat Lab Work"
        }
      ]
    },
    "Oxygen": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "371908008",
          "display": "Oxygen administration by mask (procedure)"
        }
      ],
      "remarks": [
        "Oxygen administration by mask refers to supplemental O2 via nasal cannula or mask, continuous positive airway pressure (CPAP), high flow nasal cannula (HFNC), or non-invasive ventilation (NIV)."
      ],
      "direct_transition": "Move_to_Prone_Position"
    },
    "Move_to_Prone_Position": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 431182000,
          "display": "Placing subject in prone position (procedure)"
        }
      ],
      "direct_transition": "Repeat Lab Work"
    },
    "Shock Disorder": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "target_encounter": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 27942005,
          "display": "Shock (disorder)"
        }
      ],
      "direct_transition": "Admit_Discharge Transition"
    },
    "Oxygen_Saturation_Admission": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "%",
      "codes": [
        {
          "system": "LOINC",
          "code": "2708-6",
          "display": "Oxygen saturation in Arterial blood"
        },
        {
          "system": "LOINC",
          "code": "59408-5",
          "display": "Oxygen saturation in Arterial blood by Pulse oximetry"
        }
      ],
      "vital_sign": "Oxygen Saturation",
      "conditional_transition": [
        {
          "transition": "Oxygen_Admission",
          "condition": {
            "condition_type": "Vital Sign",
            "vital_sign": "Oxygen Saturation",
            "operator": "<",
            "value": 90
          }
        },
        {
          "transition": "Wait 12 hours"
        }
      ]
    },
    "Oxygen_Admission": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "371908008",
          "display": "Oxygen administration by mask (procedure)"
        }
      ],
      "remarks": [
        "Oxygen administration by mask refers to supplemental O2 via nasal cannula or mask, continuous positive airway pressure (CPAP), high flow nasal cannula (HFNC), or non-invasive ventilation (NIV)."
      ],
      "direct_transition": "Move_to_Prone_Position_Admission"
    },
    "Move_to_Prone_Position_Admission": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 431182000,
          "display": "Placing subject in prone position (procedure)"
        }
      ],
      "direct_transition": "Wait 12 hours"
    },
    "ECG": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 29303009,
          "display": "Electrocardiographic procedure"
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "direct_transition": "ECG_Data",
      "reason": "chf"
    },
    "ECG_Data": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Cardiovascular_Stress_Test",
          "distribution": 0.25
        },
        {
          "distribution": 0.75,
          "transition": "Chest X-Ray Check"
        }
      ]
    },
    "Cardiovascular_Stress_Test": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 76746007,
          "display": "Cardiovascular stress testing (procedure)"
        }
      ],
      "duration": {
        "low": 30,
        "high": 60,
        "unit": "minutes"
      },
      "reason": "chf",
      "direct_transition": "Chest X-Ray Check"
    },
    "Chest X-Ray Check": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Chest X-Ray",
          "distribution": 0.5
        },
        {
          "transition": "Initial Encounter End",
          "distribution": 0.5
        }
      ]
    },
    "Chest X-Ray": {
      "type": "ImagingStudy",
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": 399208008,
        "display": "Plain chest X-ray (procedure)"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": 51185008,
            "display": "Thoracic structure (body structure)"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "CR",
            "display": "Computed Radiography"
          },
          "instances": [
            {
              "title": "Title of this image",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.1.1",
                "display": "Digital X-Ray Image Storage – for Presentation"
              }
            }
          ]
        }
      ],
      "direct_transition": "Initial Encounter End"
    },
    "Inpatient_Echocardiography": {
      "type": "ImagingStudy",
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": 40701008,
        "display": "Echocardiography (procedure)"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": 80891009,
            "display": "Heart structure (body structure)"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "US",
            "display": "Ultrasound"
          },
          "instances": [
            {
              "title": "Ultrasound Multiframe Image Storage",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.3.1",
                "display": "Ultrasound Multiframe Image Storage"
              }
            }
          ]
        }
      ],
      "direct_transition": "Report_workup_imaging"
    },
    "Report_workup_imaging": {
      "type": "DiagnosticReport",
      "codes": [
        {
          "system": "LOINC",
          "code": "55405-5",
          "display": "Heartfailure Tracking Panel"
        }
      ],
      "observations": [
        {
          "category": "laboratory",
          "unit": "%",
          "codes": [
            {
              "system": "LOINC",
              "code": "10230-1",
              "display": "Left ventricular Ejection fraction"
            }
          ],
          "vital_sign": "Left ventricular Ejection fraction"
        }
      ],
      "direct_transition": "Inpatient daily routine"
    },
    "Inpatient_ECG": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 29303009,
          "display": "Electrocardiographic procedure"
        }
      ],
      "duration": {
        "low": 5,
        "high": 10,
        "unit": "minutes"
      },
      "reason": "chf",
      "distributed_transition": [
        {
          "transition": "Inpatient_Echocardiography",
          "distribution": 0.25
        },
        {
          "transition": "Inpatient daily routine",
          "distribution": 0.75
        }
      ]
    },
    "Check Outcome": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Dead within 28 days",
          "distribution": 0.1
        },
        {
          "transition": "Dead within 1 year",
          "distribution": 0.3
        },
        {
          "transition": "End Inpatient Encounter",
          "distribution": 0.6
        }
      ]
    },
    "Med_Rec_2": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "430193006",
          "display": "Medication Reconciliation (procedure)"
        }
      ],
      "direct_transition": "Inpatient_ECG"
    },
    "Heart Failure Education": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 423475008,
          "display": "Heart failure education (procedure)"
        }
      ],
      "duration": {
        "low": 30,
        "high": 60,
        "unit": "minutes"
      },
      "direct_transition": "End Inpatient Care Plan",
      "reason": "CHF Condition Start"
    }
  }
}