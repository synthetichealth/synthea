{
  "name": "Skilled Nursing Facility",
  "remarks": [
    "Simplified Skilled Nursing Facility module with a regular routine of physical therapy, occupational therapy, social services, medication administration, and dietary counseling."
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "complex_transition":[
        {
          "condition": {
            "condition_type": "Age",
            "operator": "<",
            "quantity": 65,
            "unit": "years"
          },
          "distributions": [
            {
              "distribution": 0.041,
              "transition": "Wait_for_the_End"
            },
            {
              "distribution": 0.959,
              "transition": "Terminal"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Age",
            "operator": "<",
            "quantity": 75,
            "unit": "years"
          },
          "distributions": [
            {
              "distribution": 0.0294,
              "transition": "Wait_for_the_End"
            },
            {
              "distribution": 0.97,
              "transition": "Terminal"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Age",
            "operator": "<",
            "quantity": 85,
            "unit": "years"
          },
          "distributions": [
            {
              "distribution": 0.075,
              "transition": "Wait_for_the_End"
            },
            {
              "distribution": 0.925,
              "transition": "Terminal"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Age",
            "operator": "<",
            "quantity": 89,
            "unit": "years"
          },
          "distributions": [
            {
              "distribution": 0.177,
              "transition": "Wait_for_the_End"
            },
            {
              "distribution": 0.823,
              "transition": "Terminal"
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Age",
            "operator": ">=",
            "quantity": 90,
            "unit": "years"
          },
          "distributions": [
            {
              "distribution": 0.179,
              "transition": "Wait_for_the_End"
            },
            {
              "distribution": 0.821,
              "transition": "Terminal"
            }
          ]
        }
      ]
    },
    "Wait_for_the_End": {
      "type": "Guard",
      "allow": {
        "condition_type": "And",
        "conditions": [
          {
            "condition_type": "Attribute",
            "attribute": "snf_days",
            "operator": "is not nil"
          },
          {
            "condition_type": "Attribute",
            "attribute": "snf_days",
            "operator": ">=",
            "value": 0
          },
          {
            "condition_type": "Attribute",
            "attribute": "insurance_status",
            "operator": "==",
            "value": "medicare"
          },
          {
            "condition_type": "Age",
            "operator": ">=",
            "quantity": 18,
            "unit": "years"
          },
          {
            "condition_type": "Or",
              "conditions": [
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "91302008",
                      "display": "Sepsis"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "covid19_bacterial_infection",
                  "operator": "is not nil"
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "233604007",
                      "display": "Pneumonia"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "38822007",
                      "display": "Urinary Tract Infection"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "10509002",
                      "display": "Acute Bronchitis"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "hypertension_severe",
                  "operator": "==",
                  "value": true
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "LOINC",
                      "code": "55277-8",
                      "display": "HIV Positive Status"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "26929004",
                      "display": "Alzheimers"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "254837009",
                      "display": "Breast Cancer"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "lung_cancer",
                  "operator": "==",
                  "value": true
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "126906006",
                      "display": "Prostate Cancer"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "93761005",
                      "display": "Colorectal Cancer Stage I"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "109838007",
                      "display": "Colorectal Cancer Stage II"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "363406005",
                      "display": "Colorectal Cancer Stage III"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "94260004",
                      "display": "Colorectal Cancer Stage IV"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "88805009",
                      "display": "Chronic Congestive Heart Failure"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "22298006",
                      "display": "Myocardial Infarction"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "coronary_heart_disease",
                  "operator": "==",
                  "value": true
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "399211009",
                      "display": "History of myocardial infarction"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "234466008",
                      "display": "Acquired coagulation disorder"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "burn_injury",
                  "operator": "is not nil"
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "1734006",
                      "display": "Fracture of the vertebral column with spinal cord injury"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "58150001",
                      "display": "Broken Clavicle"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "359817006",
                      "display": "Closed Fracture of Hip"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "33737001",
                      "display": "Fracture of Rib"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "16114001",
                      "display": "Fracture of Ankle"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "65966004",
                      "display": "Fracture of Forearm"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "263102004",
                      "display": "Fracture Subluxation of Wrist"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "110030002",
                      "display": "Concussion injury of brain"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "laceration_injury",
                  "operator": "is not nil"
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "190905008",
                      "display": "Cystic Fibrosis"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "87433001",
                      "display": "Pulmonary Emphysema"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "185086009",
                      "display": "Chronic Obstructive Bronchitis"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "65710008",
                      "display": "Acute respiratory failure (disorder)"
                    }
                  ]
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "ckd",
                  "operator": "is not nil"
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "diabetes",
                  "operator": "==",
                  "value": true
                },
                {
                  "condition_type": "Attribute",
                  "attribute": "joint_replacement",
                  "operator": "is not nil"
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "161622006",
                      "display": "History of Lower Limb Amputation"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "429280009",
                      "display": "History of Amputation of Foot"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "161621004",
                      "display": "History of Upper Limb Amputation"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "698423002",
                      "display": "History of Disarticulation at Wrist"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "200936003",
                      "display": "Lupus erythematosus"
                    }
                  ]
                },
                {
                  "condition_type": "Active Condition",
                  "codes": [
                    {
                      "system": "SNOMED-CT",
                      "code": "69896004",
                      "display": "Rheumatoid arthritis"
                    }
                  ]
                }
              ]
            }
        ]
      },
      "direct_transition": "SNF_Admission"
    },
    "SNF_Admission": {
      "type": "Encounter",
      "encounter_class": "snf",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "449411000124106",
          "display": "Admission to Skilled Nursing Facility"
        }
      ],
      "direct_transition": "Determine_LOS"
    },
    "Determine_LOS": {
      "type": "SetAttribute",
      "attribute": "snf_days",
      "distributed_transition": [
        {
            "distribution": 0.35,
            "range": {
                "high": 15,
                "low": 1,
                "unit": "days"
            },
            "transition": "SNF_1-15_Days"
        },
        {
            "distribution": 0.34,
            "range": {
                "high": 30,
                "low": 16,
                "unit": "days"
            },
            "transition": "SNF_16-30_Days"
        },
        {
            "distribution": 0.29,
            "range": {
                "high": 99,
                "low": 31,
                "unit": "days"
            },
            "transition": "SNF_31-99_Days"
        },
        {
            "distribution": 0.02,
            "range": {
                "high": 100,
                "low": 100,
                "unit": "days"
            },
            "transition": "SNF_100_Days"
        }
      ]
    },
    "SNF_1-15_Days": {
      "type": "Simple",
      "direct_transition": "History_Physical_Exam"
    },
    "SNF_16-30_Days": {
      "type": "Simple",
      "direct_transition": "History_Physical_Exam"
    },
    "SNF_31-99_Days": {
      "type": "Simple",
      "direct_transition": "History_Physical_Exam"
    },
    "SNF_100_Days": {
      "type": "Simple",
      "direct_transition": "History_Physical_Exam"
    },
    "History_Physical_Exam": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "63332003",
          "display": "History AND Physical Exmaination"
        }
      ],
      "direct_transition": "Initial_Patient_Assessment"
    },
    "Initial_Patient_Assessment": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "315639002",
          "display": "Initial Patient Assessment"
        }
      ],
      "direct_transition": "Development_of_Individualized_Care_Plan"
    },
    "Development_of_Individualized_Care_Plan": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "370789001",
          "display": "Development of Indvidualized Plan of Care"
        }
      ],
      "direct_transition": "Begin_Day"
    },
    "Begin_Day": {
      "type": "Counter",
      "attribute": "snf_days",
      "action": "decrement",
      "amount": 1,
      "direct_transition": "Nursing"
    },
    "Nursing":{
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "410401003",
          "display": "Nursing: Nursing care/supplementary surveillance (regime/therapy)"
        }
      ],
      "direct_transition": "Physical_Therapy_Check"
    },
    "Physical_Therapy_Check": {
      "type": "Simple",
      "distributed_transition": [
        {
            "distribution": 0.94,
            "transition": "Physical_Therapy"
        },
        {
          "distribution": 0.06,
          "transition": "Occupational_Therapy_Check"
        }
      ]
    },
    "Physical_Therapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "91251008",
          "display": "Physical Therapy Procedure (regime/therapy)"
        }
      ],
      "range": {
        "high": 60,
        "low": 45,
        "unit": "minutes"
      },
      "direct_transition": "Occupational_Therapy_Check"
    },
    "Occupational_Therapy_Check": {
      "type": "Simple",
      "distributed_transition": [
        {
          "distribution": 0.94,
          "transition": "Occupational_Therapy"
        },
        {
          "distribution": 0.06,
          "transition": "Speech_Language_Therapy_Check"
        }
      ]
    },
    "Occupational_Therapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "84478008",
          "display": "Occupational Therapy(regime/therapy)"
        }
      ],
      "direct_transition": "Speech_Language_Therapy_Check"
    },
    "Speech_Language_Therapy_Check": {
      "type": "Simple",
      "distributed_transition": [
        {
          "distribution": 0.43,
          "transition": "Speech_Language_Therapy"
        },
        {
          "distribution": 0.57,
          "transition": "NTA_Check"
        }
      ]
    },
    "Speech_Language_Therapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "311555007",
          "display": "Speech and Language Therapy (regime/therapy)"
        }
      ],
      "direct_transition": "NTA_Check"
    },
    "NTA_Check": {
      "type": "Simple",
      "distributed_transition": [
        {
          "distribution": 0.75,
          "transition": "Professional_Services_Care"
        },
        {
          "distribution": 0.25,
          "transition": "Status_Change_Check"
        }
      ]
    },
    "Professional_Services_Care": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "409023009",
          "display": "Professional/Ancillary Services Care (regime/therapy)"
        }
      ],
      "direct_transition": "Status_Change_Check"
    },
    "Status_Change_Check": {
      "type": "Simple",
      "distributed_transition": [
        {
          "distribution": 0.01,
          "transition": "Care_Regimes_Assessment"
        },
        {
          "distribution": 0.99,
          "transition": "End_Day"
        }
      ]
    },
    "Care_Regimes_Assessment": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "392091000",
          "display": "Care Regimes Assessment (procedure)"
        }
      ],
      "direct_transition": "End_Day"
    },
    "End_Day": {
      "type": "EncounterEnd",
      "conditional_transition": [
        {
          "transition": "Begin_Day",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "snf_days",
            "operator": ">",
            "value": 0
        }
      },
      {
        "transition": "Predischarge_Assessment"
      }
      ]
    },
    "Predischarge_Assessment": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "225386006",
          "display": "Pre-discharge Assessment (procedure)"
        }
      ],
      "direct_transition": "Discharge_From_SNF"
    },
    "Discharge_From_SNF": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "449381000124108",
          "display": "Discharge From Skilled Nursing Facility (procedure)"
        }
      ],
      "direct_transition": "Terminal"
    }
  },
  "gmf_version": 1
}