{
  "name": "Surgery_Therapy_Breast",
  "remarks": [
    "A blank module"
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "Surgery encounter"
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Mastectomy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 69031006,
          "display": "Excision of breast tissue (procedure)"
        }
      ],
      "duration": {
        "low": 2,
        "high": 3,
        "unit": "hours"
      },
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/mastectomy/expectations"
      ],
      "direct_transition": "End Surgery encounter"
    },
    "Breast-conserving surgery (BCS)": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 392021009,
          "display": "Lumpectomy of breast (procedure)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 40,
        "unit": "minutes"
      },
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/lumpectomy/expectations"
      ],
      "direct_transition": "BCS end surgery"
    },
    "External Beam Radiation": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 33195004,
          "display": "Teleradiotherapy procedure (procedure)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 40,
        "unit": "minutes"
      },
      "direct_transition": "End Current Radiation Visit",
      "remarks": [
        "https://www.cancer.org/cancer/breast-cancer/treatment/radiation-for-breast-cancer.html"
      ]
    },
    "Hypofractionated radiation therapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 385798007,
          "display": "Radiation therapy care (regime/therapy)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 40,
        "unit": "minutes"
      },
      "direct_transition": "End Current Radiation Visit",
      "remarks": [
        "https://www.breastcancer.org/research-news/accelerated-whole-breast-radiation-new-standard"
      ]
    },
    "Intraoperative radiation therapy (IORT)": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "1234",
          "display": "Radiotherapy - intraoperative control (procedure)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 40,
        "unit": "minutes"
      },
      "direct_transition": "End Current Radiation Visit",
      "remarks": [
        "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5493441/",
        "https://uihc.org/health-topics/intraoperative-radiation-therapy-iort"
      ]
    },
    "Brachytherapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "SCTID: 447759004",
          "display": "Brachytherapy of breast (procedure)"
        }
      ],
      "duration": {
        "low": 2,
        "high": 8,
        "unit": "weeks"
      },
      "remarks": [
        "https://www.cancer.org/cancer/breast-cancer/treatment/radiation-for-breast-cancer.html",
        "https://www.mayoclinic.org/tests-procedures/brachytherapy/about/pac-20385159"
      ],
      "distributed_transition": [
        {
          "transition": "Interstitial Brachytherapy",
          "distribution": 0.5
        },
        {
          "transition": "Intracavitary brachytherapy",
          "distribution": 0.5
        }
      ]
    },
    "Interstitial Brachytherapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 113120007,
          "display": "Interstitial brachytherapy (procedure)"
        }
      ],
      "duration": {
        "low": 2,
        "high": 8,
        "unit": "weeks"
      },
      "direct_transition": "End Brachytherapy Implant",
      "remarks": [
        "https://www.mayoclinic.org/tests-procedures/brachytherapy/about/pac-20385159"
      ]
    },
    "Intracavitary brachytherapy": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 384692006,
          "display": "Intracavitary brachytherapy (procedure)"
        }
      ],
      "duration": {
        "low": 2,
        "high": 8,
        "unit": "weeks"
      },
      "remarks": [
        "https://www.mayoclinic.org/tests-procedures/brachytherapy/about/pac-20385159"
      ],
      "direct_transition": "End Brachytherapy Implant"
    },
    "chemo": {
      "type": "CallSubmodule",
      "submodule": "breast_cancer/chemotherapy_breast",
      "direct_transition": "End Breast Surgery"
    },
    "Advanced_drugs": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Denosumab",
          "distribution": 0.34
        },
        {
          "transition": "Zoledronic_Acid",
          "distribution": 0.33
        },
        {
          "transition": "Pamidronate",
          "distribution": 0.33
        }
      ]
    },
    "Zoledronic_Acid": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 285143,
          "display": "Zometa"
        }
      ],
      "direct_transition": "Advanced Drugs IV Injection",
      "assign_to_attribute": "adv_drug"
    },
    "Denosumab": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 1046399,
          "display": "Xgeva"
        }
      ],
      "direct_transition": "Advanced Drugs IV Injection",
      "assign_to_attribute": "adv_drug"
    },
    "Pamidronate": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 11473,
          "display": "Aredia"
        }
      ],
      "direct_transition": "Pamidronate IV Injection",
      "assign_to_attribute": "adv_drug"
    },
    "Breast_Surgery": {
      "type": "Simple",
      "remarks": [
        "https://www.cooperhealth.org/services/radiation-oncology/questions-you-may-have-about-radiation-therapy"
      ],
      "direct_transition": "Breast_Surgery_2"
    },
    "Sentinel_Lymph_Node_Biopsy__SLNB_": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 396487001,
          "display": "Sentinel lymph node biopsy (procedure)"
        }
      ],
      "duration": {
        "low": 0,
        "high": 1,
        "unit": "days"
      },
      "direct_transition": "End_Lymph_Node_Surgery"
    },
    "Axillary_Lymph_Node_Dissection__ALND_": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 234262008,
          "display": "Excision of axillary lymph node (procedure)"
        }
      ],
      "duration": {
        "low": 0,
        "high": 1,
        "unit": "days"
      },
      "direct_transition": "End_Lymph_Node_Surgery"
    },
    "End Breast Surgery": {
      "type": "Simple",
      "direct_transition": "Delay After Treatment"
    },
    "Lymph_Node Surgery": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Sentinel_Lymph_Node_Biopsy__SLNB_",
          "distribution": 0.5
        },
        {
          "transition": "Axillary_Lymph_Node_Dissection__ALND_",
          "distribution": 0.5
        }
      ]
    },
    "End_Lymph_Node_Surgery": {
      "type": "Simple",
      "conditional_transition": [
        {
          "transition": "Breast_Surgery",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "T",
            "operator": "!=",
            "value": "T0"
          }
        },
        {
          "transition": "End Breast Surgery",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "T",
            "operator": "==",
            "value": "T0"
          }
        }
      ]
    },
    "Surgery encounter": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "reason": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "conditional_transition": [
        {
          "transition": "Lymph_Node Surgery",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "N",
            "operator": "!=",
            "value": "N0"
          }
        },
        {
          "transition": "End_Lymph_Node_Surgery",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "N",
            "operator": "==",
            "value": "N0"
          }
        }
      ]
    },
    "End Surgery encounter": {
      "type": "EncounterEnd",
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/mastectomy/expectations"
      ],
      "direct_transition": "Delay after Mastectomy"
    },
    "BCS end surgery": {
      "type": "EncounterEnd",
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/lumpectomy/expectations"
      ],
      "direct_transition": "Delay After BCS"
    },
    "Delay After BCS": {
      "type": "Delay",
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/lumpectomy/expectations"
      ],
      "range": {
        "low": 5,
        "high": 14,
        "unit": "days"
      },
      "direct_transition": "BCS Follow-Up Treatment"
    },
    "Delay after Mastectomy": {
      "type": "Delay",
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/mastectomy/expectations"
      ],
      "range": {
        "low": 5,
        "high": 14,
        "unit": "days"
      },
      "direct_transition": "Mastectomy Follow-Up Therapy"
    },
    "Mastectomy Follow-Up Therapy": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Observation",
            "codes": [
              {
                "system": "LOINC",
                "code": "21908-9",
                "display": "Stage group.clinical Cancer"
              }
            ],
            "operator": "==",
            "value_code": {
              "system": "SNOMED-CT",
              "code": 13104003,
              "display": "Clinical stage I (finding)"
            }
          },
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 1
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 0.01
            },
            {
              "transition": "chemo",
              "distribution": 0.33
            },
            {
              "transition": "Advanced_drugs",
              "distribution": 0.66
            }
          ],
          "condition": {
            "condition_type": "Observation",
            "codes": [
              {
                "system": "LOINC",
                "code": "21908-9",
                "display": "Stage group.clinical Cancer"
              }
            ],
            "operator": "==",
            "value_code": {
              "system": "SNOMED-CT",
              "code": 2640006,
              "display": "Clinical stage IV (finding)"
            }
          }
        },
        {
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 0.5
            },
            {
              "transition": "chemo",
              "distribution": 0.5
            }
          ]
        }
      ],
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/mastectomy/expectations"
      ]
    },
    "BCS Follow-Up Treatment": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "reason": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Observation",
            "codes": [
              {
                "system": "LOINC",
                "code": "21908-9",
                "display": "Stage group.clinical Cancer"
              }
            ],
            "operator": "==",
            "value_code": {
              "system": "SNOMED-CT",
              "code": 13104003,
              "display": "Clinical stage I (finding)"
            }
          },
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 0.4
            },
            {
              "transition": "Intraoperative radiation therapy (IORT)",
              "distribution": 0.1
            },
            {
              "transition": "Hypofractionated radiation therapy",
              "distribution": 0.4
            },
            {
              "transition": "Brachytherapy",
              "distribution": 0.1
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 0.02
            },
            {
              "transition": "Hypofractionated radiation therapy",
              "distribution": 0.04
            },
            {
              "transition": "Intraoperative radiation therapy (IORT)",
              "distribution": 0.04
            },
            {
              "transition": "Brachytherapy",
              "distribution": 0.1
            },
            {
              "transition": "chemo",
              "distribution": 0.1
            },
            {
              "transition": "Advanced_drugs",
              "distribution": 0.7
            }
          ],
          "condition": {
            "condition_type": "Observation",
            "codes": [
              {
                "system": "LOINC",
                "code": "21908-9",
                "display": "Stage group.clinical Cancer"
              }
            ],
            "operator": "==",
            "value_code": {
              "system": "SNOMED-CT",
              "code": 2640006,
              "display": "Clinical stage IV (finding)"
            }
          }
        },
        {
          "distributions": [
            {
              "transition": "External Beam Radiation",
              "distribution": 0.3
            },
            {
              "transition": "Hypofractionated radiation therapy",
              "distribution": 0.3
            },
            {
              "transition": "Intraoperative radiation therapy (IORT)",
              "distribution": 0.1
            },
            {
              "transition": "Brachytherapy",
              "distribution": 0.1
            },
            {
              "transition": "chemo",
              "distribution": 0.2
            }
          ]
        }
      ],
      "remarks": [
        "https://www.breastcancer.org/treatment/surgery/lumpectomy/expectations"
      ]
    },
    "Pamidronate IV Injection": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 43060002,
          "display": "Intravenous injection (procedure)"
        }
      ],
      "duration": {
        "low": 2,
        "high": 24,
        "unit": "hours"
      },
      "direct_transition": "End Pamidronate Infusion Encounter"
    },
    "End Pamidronate Infusion Encounter": {
      "type": "EncounterEnd",
      "direct_transition": "End Pamidronate Medication"
    },
    "Advanced Drugs IV Injection": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 43060002,
          "display": "Intravenous injection (procedure)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 120,
        "unit": "minutes"
      },
      "direct_transition": "End Current Advanced Drug Infusion"
    },
    "End Current Advanced Drug Infusion": {
      "type": "EncounterEnd",
      "conditional_transition": [
        {
          "transition": "Increment treatment counter",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "treat_count",
            "operator": "<",
            "value": 8
          }
        },
        {
          "transition": "End Advanced Drug Medication"
        }
      ]
    },
    "End Advanced Drug Medication": {
      "type": "MedicationEnd",
      "direct_transition": "End Breast Surgery",
      "referenced_by_attribute": "adv_drug"
    },
    "End Pamidronate Medication": {
      "type": "MedicationEnd",
      "direct_transition": "End Breast Surgery",
      "referenced_by_attribute": "adv_drug"
    },
    "Increment treatment counter": {
      "type": "Counter",
      "attribute": "treat_count",
      "action": "increment",
      "direct_transition": "6 Month Delay"
    },
    "Breast_Surgery_2": {
      "type": "SetAttribute",
      "attribute": "treat_count",
      "distributed_transition": [
        {
          "transition": "Breast-conserving surgery (BCS)",
          "distribution": 0.6
        },
        {
          "transition": "Mastectomy",
          "distribution": 0.4
        }
      ],
      "remarks": [
        "https://www.cooperhealth.org/services/radiation-oncology/questions-you-may-have-about-radiation-therapy"
      ],
      "value": 0
    },
    "6 Month Delay": {
      "type": "Delay",
      "exact": {
        "quantity": 6,
        "unit": "months"
      },
      "direct_transition": "Start New Advanced Drug Cycle"
    },
    "Start New Advanced Drug Cycle": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "reason": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "direct_transition": "Advanced Drugs IV Injection"
    },
    "Delay After Treatment": {
      "type": "Delay",
      "direct_transition": "Terminal",
      "range": {
        "low": 2,
        "high": 7,
        "unit": "days"
      }
    },
    "Radiation_Buffer_After_Brachytherapy": {
      "type": "Delay",
      "range": {
        "low": 2,
        "high": 8,
        "unit": "weeks"
      },
      "direct_transition": "End Breast Surgery"
    },
    "End Brachytherapy Implant": {
      "type": "EncounterEnd",
      "direct_transition": "Radiation_Buffer_After_Brachytherapy"
    },
    "End Current Radiation Visit": {
      "type": "EncounterEnd",
      "conditional_transition": [
        {
          "transition": "Increment Radiation Treatment Count",
          "condition": {
            "condition_type": "Attribute",
            "attribute": "treat_count",
            "operator": "<",
            "value": 33
          }
        },
        {
          "transition": "End Breast Surgery"
        }
      ]
    },
    "Increment Radiation Treatment Count": {
      "type": "Counter",
      "attribute": "treat_count",
      "action": "increment",
      "direct_transition": "Delay Until Next Cycle"
    },
    "Delay Until Next Cycle": {
      "type": "Delay",
      "direct_transition": "Next Day Radiation Treatment",
      "range": {
        "low": 1,
        "high": 1.5,
        "unit": "days"
      }
    },
    "Next Day Radiation Treatment": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "reason": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185347001,
          "display": "Encounter for problem"
        }
      ],
      "conditional_transition": [
        {
          "transition": "External Beam Radiation",
          "condition": {
            "condition_type": "PriorState",
            "name": "External Beam Radiation"
          }
        },
        {
          "transition": "Intraoperative radiation therapy (IORT)",
          "condition": {
            "condition_type": "PriorState",
            "name": "Intraoperative radiation therapy (IORT)"
          }
        },
        {
          "transition": "Hypofractionated radiation therapy",
          "condition": {
            "condition_type": "PriorState",
            "name": "Hypofractionated radiation therapy"
          }
        }
      ]
    }
  }
}