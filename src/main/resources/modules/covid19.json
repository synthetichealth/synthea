{
  "name": "covid19",
  "remarks": [
    "Coronavirus (COVID-19) module.",
    "",
    "This is module for the treatment of COVID-19 has estimates for rates of infection, rates of admission, and probabilities.",
    "",
    "Treatments are based on many sources, many of which are updating. Many pathways are missing.",
    "",
    "Daily lab values and measurements are missing."
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "Wait Until Outbreak"
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Wait Until Outbreak": {
      "type": "Guard",
      "allow": {
        "condition_type": "Date",
        "operator": "==",
        "year": 2020,
        "value": 0
      },
      "direct_transition": "Wait Until Exposure"
    },
    "Wait Until Exposure": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 90,
        "unit": "days"
      },
      "distributed_transition": [
        {
          "distribution": 0.2,
          "transition": "Encounter for Test"
        },
        {
          "transition": "Terminal",
          "distribution": 0.8
        }
      ]
    },
    "Encounter for Test": {
      "type": "Encounter",
      "encounter_class": "ambulatory",
      "reason": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 185345009,
          "display": "Encounter for symptom (procedure)"
        }
      ],
      "direct_transition": "Cough"
    },
    "Cough": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 49727002,
          "display": "Cough (finding)"
        }
      ],
      "direct_transition": "Take Temperature"
    },
    "Fever": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 386661006,
          "display": "Fever (finding)"
        }
      ],
      "direct_transition": "Acetaminophen"
    },
    "Shortness of Breath": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 267036007,
          "display": "Dyspnea (finding)"
        }
      ],
      "direct_transition": "Suspected COVID"
    },
    "Take Temperature": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "Cel",
      "codes": [
        {
          "system": "LOINC",
          "code": "8310-5",
          "display": "Body temperature"
        },
        {
          "system": "LOINC",
          "code": "8331-1",
          "display": "Oral temperature"
        }
      ],
      "direct_transition": "Fever",
      "range": {
        "low": 37.7,
        "high": 42.2
      }
    },
    "Administer COVID-19 Test": {
      "type": "DiagnosticReport",
      "codes": [
        {
          "system": "LOINC",
          "code": "94531-1",
          "display": "SARS-CoV-2 RNA Pnl Resp NAA+probe"
        }
      ],
      "observations": [
        {
          "category": "laboratory",
          "unit": "",
          "codes": [
            {
              "system": "LOINC",
              "code": "94531-1",
              "display": "SARS-CoV-2 RNA Pnl Resp NAA+probe"
            }
          ],
          "value_code": {
            "system": "SNOMED-CT",
            "code": 10828004,
            "display": "Positive (qualifier value)"
          }
        }
      ],
      "direct_transition": "End Exposure"
    },
    "End Exposure": {
      "type": "ConditionEnd",
      "direct_transition": "Diagnosed COVID",
      "condition_onset": "Suspected COVID"
    },
    "Diagnosed COVID": {
      "type": "ConditionOnset",
      "assign_to_attribute": "covid19",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 840539006,
          "display": "COVID-19"
        }
      ],
      "direct_transition": "End Isolation In Room"
    },
    "Suspected COVID": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 840544004,
          "display": "Suspected COVID-19"
        }
      ],
      "direct_transition": "Apply Face Mask to Patient"
    },
    "Admission": {
      "type": "Encounter",
      "encounter_class": "inpatient",
      "reason": "Diagnosed COVID",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 737481003,
          "display": "Inpatient care management (procedure)"
        }
      ],
      "direct_transition": "Count Days"
    },
    "Pneumonia": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 233604007,
          "display": "Pneumonia (disorder)"
        }
      ],
      "distributed_transition": [
        {
          "transition": "Respiratory Distress",
          "distribution": 0.5
        },
        {
          "transition": "Respiratory Failure",
          "distribution": 0.5
        }
      ]
    },
    "Stay": {
      "type": "Counter",
      "attribute": "covid19_admission_days",
      "action": "increment",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "covid19_admission_days",
            "operator": "<=",
            "value": 14
          },
          "distributions": [],
          "transition": "Antiviral Medication"
        },
        {
          "distributions": [],
          "transition": "Cytokine Suppression"
        }
      ]
    },
    "Death": {
      "type": "Death",
      "direct_transition": "Terminal",
      "condition_onset": "Diagnosed COVID"
    },
    "Wait for Admission": {
      "type": "Delay",
      "direct_transition": "Admission",
      "range": {
        "low": 5,
        "high": 8,
        "unit": "days"
      }
    },
    "Discharge": {
      "type": "EncounterEnd",
      "direct_transition": "End Self Isolation At Home"
    },
    "Apply Face Mask to Patient": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 261352009,
          "display": "Face mask (physical object)"
        }
      ],
      "duration": {
        "low": 10,
        "high": 15,
        "unit": "minutes"
      },
      "direct_transition": "Isolation in Negative Pressure",
      "remarks": [
        "This should really be a \"Device\" state."
      ],
      "reason": "Suspected COVID"
    },
    "Wait for Test in Negative Pressure Room": {
      "type": "Delay",
      "direct_transition": "Administer COVID-19 Test",
      "range": {
        "low": 30,
        "high": 90,
        "unit": "minutes"
      }
    },
    "Isolation in Negative Pressure": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 736376001,
          "display": "Infectious disease care plan (record artifact)"
        }
      ],
      "direct_transition": "Wait for Test in Negative Pressure Room",
      "reason": "Suspected COVID",
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 444908001,
          "display": "Isolation nursing in negative pressure isolation environment (regime/therapy)"
        },
        {
          "system": "SNOMED-CT",
          "code": 409524006,
          "display": "Airborne precautions (procedure)"
        },
        {
          "system": "SNOMED-CT",
          "code": 409526008,
          "display": "Personal protective equipment (physical object)"
        }
      ],
      "assign_to_attribute": "covid19_careplan"
    },
    "Acetaminophen": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 198440,
          "display": "Acetaminophen 500 MG Oral Tablet"
        }
      ],
      "direct_transition": "Shortness of Breath",
      "remarks": [
        "For fever response, we want to use acetaminophen.",
        "WHO Now Officially Recommends to Avoid Taking Ibuprofen For COVID-19 Symptoms"
      ],
      "reason": "Fever",
      "administration": true
    },
    "End Isolation In Room": {
      "type": "CarePlanEnd",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Or",
            "conditions": [
              {
                "condition_type": "Or",
                "conditions": [
                  {
                    "condition_type": "Attribute",
                    "attribute": "diabetes",
                    "operator": "==",
                    "value": true
                  },
                  {
                    "condition_type": "Attribute",
                    "attribute": "hypertension",
                    "operator": "==",
                    "value": true
                  }
                ]
              },
              {
                "condition_type": "Or",
                "conditions": [
                  {
                    "condition_type": "Attribute",
                    "attribute": "copd_variant",
                    "operator": "is not nil"
                  },
                  {
                    "condition_type": "Or",
                    "conditions": [
                      {
                        "condition_type": "Attribute",
                        "attribute": "Cystic_Fibrosis",
                        "operator": "is not nil"
                      },
                      {
                        "condition_type": "Or",
                        "conditions": [
                          {
                            "condition_type": "Attribute",
                            "attribute": "asthma_condition",
                            "operator": "is not nil"
                          },
                          {
                            "condition_type": "Attribute",
                            "attribute": "smoker",
                            "operator": "==",
                            "value": true
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "distributions": [],
          "transition": "End Encounter and Admit Immediately"
        },
        {
          "distributions": [],
          "transition": "Self Isolation At Home"
        }
      ],
      "referenced_by_attribute": "covid19_careplan"
    },
    "Self Isolation At Home": {
      "type": "CarePlanStart",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 736376001,
          "display": "Infectious disease care plan (record artifact)"
        }
      ],
      "reason": "Diagnosed COVID",
      "activities": [
        {
          "system": "SNOMED-CT",
          "code": 409524006,
          "display": "Airborne precautions (procedure)"
        },
        {
          "system": "SNOMED-CT",
          "code": 361235007,
          "display": "Isolation of infected patient (procedure)"
        }
      ],
      "goals": [
        {
          "addresses": [
            "covid19"
          ],
          "text": "Self isolation and social distancing for 14 days."
        }
      ],
      "assign_to_attribute": "covid19_careplan",
      "direct_transition": "End Encounter and Discharge Home"
    },
    "End Self Isolation At Home": {
      "type": "CarePlanEnd",
      "direct_transition": "End Cough",
      "referenced_by_attribute": "covid19_careplan"
    },
    "Self Isolation Delay": {
      "type": "Delay",
      "exact": {
        "quantity": 14,
        "unit": "days"
      },
      "direct_transition": "End Self Isolation At Home"
    },
    "Wait for Death": {
      "type": "Delay",
      "direct_transition": "Death",
      "range": {
        "low": 5,
        "high": 8,
        "unit": "days"
      }
    },
    "Count Days": {
      "type": "SetAttribute",
      "attribute": "covid19_admission_days",
      "value": 0,
      "direct_transition": "Dehydration"
    },
    "Stay Another Day": {
      "type": "Delay",
      "exact": {
        "quantity": 1,
        "unit": "days"
      },
      "conditional_transition": [
        {
          "transition": "Antibacterial Injection",
          "condition": {
            "condition_type": "PriorState",
            "name": "Respiratory Failure"
          }
        },
        {
          "transition": "Metered Dose Inhaler",
          "condition": {
            "condition_type": "PriorState",
            "name": "Respiratory Distress"
          }
        }
      ]
    },
    "Recovery": {
      "type": "Delay",
      "range": {
        "low": 1,
        "high": 3,
        "unit": "days"
      },
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Or",
            "conditions": [
              {
                "condition_type": "Age",
                "operator": ">=",
                "quantity": 65,
                "unit": "years",
                "value": 0
              },
              {
                "condition_type": "Or",
                "conditions": [
                  {
                    "condition_type": "Attribute",
                    "attribute": "hypertension",
                    "operator": "==",
                    "value": true
                  },
                  {
                    "condition_type": "Attribute",
                    "attribute": "diabetes",
                    "operator": "==",
                    "value": true
                  }
                ]
              }
            ]
          },
          "distributions": [
            {
              "transition": "Death",
              "distribution": 0.8
            },
            {
              "transition": "Discharge",
              "distribution": 0.2
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "Death",
              "distribution": 0.2
            },
            {
              "transition": "Discharge",
              "distribution": 0.8
            }
          ]
        }
      ]
    },
    "Ventilation": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 82433009,
          "display": "Continuous negative pressure ventilation treatment (procedure)"
        }
      ],
      "direct_transition": "Stay",
      "reason": "Respiratory Failure"
    },
    "Cytokine Suppression": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 1657981,
          "display": "20 ML tocilizumab 20 MG/ML Injection"
        }
      ],
      "direct_transition": "Recovery",
      "remarks": [
        "Tocilizumab injection to prevent cytokine storms."
      ],
      "administration": true,
      "reason": "Diagnosed COVID",
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 8,
          "unit": "hours"
        },
        "duration": {
          "quantity": 24,
          "unit": "hours"
        }
      }
    },
    "Gastrointestinal Issues": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 95516005,
          "display": "Gastrointestinal irritation (disorder)"
        }
      ],
      "direct_transition": "Vomiting"
    },
    "Dehydration": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 34095006,
          "display": "Dehydration (disorder)"
        }
      ],
      "direct_transition": "Gastrointestinal Issues"
    },
    "Respiratory Distress": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 271825005,
          "display": "Respiratory distress (finding)"
        }
      ],
      "direct_transition": "Metered Dose Inhaler"
    },
    "Respiratory Failure": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 65710008,
          "display": "Acute respiratory failure (disorder)"
        }
      ],
      "direct_transition": "Antibacterial Injection"
    },
    "Metered Dose Inhaler": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 2123111,
          "display": "NDA020503 200 ACTUAT Albuterol 0.09 MG/ACTUAT Metered Dose Inhaler"
        }
      ],
      "administration": true,
      "direct_transition": "Oxygen",
      "reason": "Respiratory Distress"
    },
    "Oxygen": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 371908008,
          "display": "Oxygen administration by mask (procedure)"
        }
      ],
      "reason": "Respiratory Distress",
      "direct_transition": "Stay"
    },
    "Pulmonary Edema": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 40541001,
          "display": "Acute pulmonary edema (disorder)"
        }
      ],
      "direct_transition": "Pneumonia"
    },
    "Antiviral Medication": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 979092,
          "display": "Hydroxychloroquine Sulfate 200 MG Oral Tablet"
        }
      ],
      "direct_transition": "Daily Acetaminophen for Fever",
      "administration": true,
      "reason": "Diagnosed COVID"
    },
    "Antibacterial Injection": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 1668238,
          "display": "Azithromycin 500 MG Injection"
        }
      ],
      "direct_transition": "Ventilation",
      "administration": true,
      "reason": "Pulmonary Edema",
      "remarks": [
        "Really this is only administered if there is an additional bacterial infection in the lungs."
      ]
    },
    "Vomiting": {
      "type": "ConditionOnset",
      "assign_to_attribute": "",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 765480005,
          "display": "Vomiting co-occurrent and due to infectious disease (disorder)"
        }
      ],
      "direct_transition": "Chest X-Ray"
    },
    "End Cough": {
      "type": "ConditionEnd",
      "direct_transition": "End Dehydration",
      "condition_onset": "Cough"
    },
    "End Dehydration": {
      "type": "ConditionEnd",
      "direct_transition": "End COVID19",
      "condition_onset": "Dehydration"
    },
    "End COVID19": {
      "type": "ConditionEnd",
      "direct_transition": "End Fever",
      "condition_onset": "Diagnosed COVID"
    },
    "End Fever": {
      "type": "ConditionEnd",
      "direct_transition": "End Gastrointestinal Issues",
      "condition_onset": "Fever"
    },
    "End Gastrointestinal Issues": {
      "type": "ConditionEnd",
      "direct_transition": "End Pneumonia",
      "condition_onset": "Gastrointestinal Issues"
    },
    "End Pneumonia": {
      "type": "ConditionEnd",
      "direct_transition": "End Pulmonary Edema",
      "condition_onset": "Pneumonia"
    },
    "End Pulmonary Edema": {
      "type": "ConditionEnd",
      "direct_transition": "End Respiratory Distress",
      "condition_onset": "Pulmonary Edema"
    },
    "End Respiratory Distress": {
      "type": "ConditionEnd",
      "direct_transition": "End Respiratory Failure",
      "condition_onset": "Respiratory Distress"
    },
    "End Respiratory Failure": {
      "type": "ConditionEnd",
      "direct_transition": "End Shortness of Breath",
      "condition_onset": "Respiratory Failure"
    },
    "End Shortness of Breath": {
      "type": "ConditionEnd",
      "direct_transition": "End Vomiting",
      "condition_onset": "Shortness of Breath"
    },
    "End Vomiting": {
      "type": "ConditionEnd",
      "direct_transition": "Terminal",
      "condition_onset": "Vomiting"
    },
    "Daily Acetaminophen for Fever": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": 198440,
          "display": "Acetaminophen 500 MG Oral Tablet"
        }
      ],
      "direct_transition": "Daily HEPA Filter for Room",
      "reason": "Fever",
      "administration": true
    },
    "Chest X-Ray": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 399208008,
          "display": "Plain chest X-ray (procedure)"
        }
      ],
      "duration": {
        "low": 15,
        "high": 45,
        "unit": "minutes"
      },
      "direct_transition": "Pulmonary Edema",
      "reason": "Shortness of Breath"
    },
    "Daily PPE for Clinician": {
      "type": "Simple",
      "direct_transition": "Stay Another Day",
      "remarks": [
        "SCTID: 409526008, Personal protective equipment (physical object)",
        "How many?"
      ]
    },
    "Daily HEPA Filter for Room": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": 972002,
          "display": "Air filter, device (physical object)"
        }
      ],
      "direct_transition": "Daily PPE for Clinician"
    },
    "End Encounter and Admit Immediately": {
      "type": "EncounterEnd",
      "direct_transition": "Admission"
    },
    "End Encounter and Discharge Home": {
      "type": "EncounterEnd",
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Age",
            "operator": ">=",
            "quantity": 65,
            "unit": "years",
            "value": 0
          },
          "distributions": [
            {
              "transition": "Wait for Admission",
              "distribution": 0.9
            },
            {
              "transition": "Wait for Death",
              "distribution": 0.05
            },
            {
              "transition": "Self Isolation Delay",
              "distribution": 0.05
            }
          ]
        },
        {
          "condition": {
            "condition_type": "Age",
            "operator": ">=",
            "quantity": 30,
            "unit": "years",
            "value": 0
          },
          "distributions": [
            {
              "transition": "Wait for Admission",
              "distribution": 0.5
            },
            {
              "transition": "Wait for Death",
              "distribution": 0.05
            },
            {
              "transition": "Self Isolation Delay",
              "distribution": 0.45
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "Wait for Admission",
              "distribution": 0.25
            },
            {
              "transition": "Wait for Death",
              "distribution": 0.01
            },
            {
              "transition": "Self Isolation Delay",
              "distribution": 0.74
            }
          ]
        }
      ]
    }
  }
}